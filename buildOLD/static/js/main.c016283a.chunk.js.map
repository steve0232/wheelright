{"version":3,"sources":["data/data.js","components/Header.js","components/Product.js","components/Main.js","components/Cart/CartItems.js","components/Cart/DiscountCode.js","components/Cart/Checkout.js","components/Cart/Cart.js","App.js","index.js"],"names":["data","products","id","name","price","unit","imgUrl","discount","multibuyQuantity","multibuyProductId","multibuyDiscount","Header","props","className","src","alt","Product","product","onAdd","parseInt","toFixed","onClick","Main","map","CartItems","cartItems","onRemove","totalPrice","length","item","qty","newPrice","subtotal","message","discountedTotal","DiscountCode","usedDiscountCode","discountAmount","onDiscount","onSubmit","type","placeholder","Checkout","setCartItems","setDiscountAmount","setUsedDiscountCode","setMultibuyAllowed","alert","Cart","reduce","a","c","App","useState","updatedProducts","setUpdatedProducts","multibuyAllowed","useEffect","newProducts","multibuyPrice","console","log","soup","find","bread","undefined","onCheckMultibuy","exist","filter","e","preventDefault","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"8LAwCeA,EAxCF,CACXC,SAAU,CACR,CACEC,GAAI,EACJC,KAAM,SACNC,MAAO,EACPC,KAAM,MACNC,OAAQ,mBACRC,SAAU,IAEZ,CACEL,GAAI,EACJC,KAAM,QACNC,MAAO,GACPC,KAAM,OACNC,OAAQ,mBACRC,SAAU,GAEZ,CACEL,GAAI,EACJC,KAAM,OACNC,MAAO,IACPC,KAAM,QACNC,OAAQ,kBACRC,SAAU,GAEZ,CACEL,GAAI,EACJC,KAAM,OACNC,MAAO,IACPC,KAAM,MACNC,OAAQ,kBACRC,SAAU,EACVC,iBAAkB,EAClBC,kBAAmB,EACnBC,iBAAkB,M,OC1BTC,EATA,SAAAC,GACb,OACE,yBAAQC,UAAU,uCAAlB,UACE,qBAAKC,IAAI,2BAA2BC,IAAI,GAAGF,UAAU,SACrD,oBAAIA,UAAU,wBAAd,kCC+BSG,EAnCC,SAAAJ,GACd,IAAQK,EAAmBL,EAAnBK,QAASC,EAAUN,EAAVM,MACjB,OACE,sBAAsBL,UAAU,iBAAhC,UACE,qBAAKC,IAAKG,EAAQX,OAAQS,IAAKE,EAAQd,KAAMU,UAAU,gBACvD,oBAAIA,UAAU,cAAd,SAA6BI,EAAQd,OACpCc,EAAQb,MAAQ,GACf,8BACGe,SAAyB,IAAhBF,EAAQb,MAAa,IADjC,SAC4Ca,EAAQZ,QAGrDY,EAAQb,OAAS,GAChB,qCACIa,EAAQb,MAAMgB,QAAQ,GAD1B,QACmCH,EAAQZ,QAI5CY,EAAQV,SACP,8BACGU,EAAQd,KADX,IACkBc,EAAQV,SAD1B,WAIA,sDAGF,wBACEM,UAAU,2BACVQ,QAAS,kBAAMH,EAAMD,IAFvB,2BAtBQA,EAAQf,KCaPoB,EAdF,SAAAV,GACX,IAAQX,EAAoBW,EAApBX,SAAUiB,EAAUN,EAAVM,MAClB,OACE,sBAAML,UAAU,qCAAhB,SACE,gCACE,0CACGZ,EAASsB,KAAI,SAAAN,GAAO,OACnB,cAAC,EAAD,CAA0BA,QAASA,EAASC,MAAOA,GAArCD,EAAQf,aC4DnBsB,EArEG,SAAAZ,GAChB,IAAQa,EAAqDb,EAArDa,UAAWC,EAA0Cd,EAA1Cc,SAAUR,EAAgCN,EAAhCM,MAAOjB,EAAyBW,EAAzBX,SAAU0B,EAAef,EAAfe,WAC9C,OACE,gCACwB,IAArBF,EAAUG,QAAgB,8DAC1BH,EAAUF,KAAI,SAAAM,GACb,OACE,sBAAmBhB,UAAU,iBAA7B,UACE,uBACA,gCACGgB,EAAKC,IADR,MACgBD,EAAK1B,KADrB,UAC+B0B,EAAKE,SAASX,QAAQ,GADrD,OAC6D,IAC1DS,EAAKxB,KACN,gCACE,wBACEgB,QAAS,kBAAMK,EAASG,IACxBhB,UAAU,wCAFZ,eAMA,wBACEQ,QAAS,kBAAMH,EAAMW,IACrBhB,UAAU,wCAFZ,kBAOF,sBAAKA,UAAU,0BAAf,2BACcgB,EAAKG,SAASZ,QAAQ,SAIrCS,EAAKpB,mBACJ,sBAAKI,UAAU,gBAAf,iBACOgB,EAAKrB,iBADZ,IAC+BqB,EAAK1B,KADpC,UACiD,IACtB,IAAxB0B,EAAKnB,iBAFR,QAEqC,QAClCT,EAAS4B,EAAKpB,kBAAoB,GAAGN,QAGzC0B,EAAKI,SACJ,qBAAKpB,UAAU,gBAAf,SAAgCgB,EAAKI,UAEtCJ,EAAKtB,SAAW,GAAKsB,EAAKK,gBAAkBL,EAAKC,IAAM,KACtD,sBAAKjB,UAAU,gBAAf,UACGgB,EAAK1B,KADR,IACe0B,EAAKtB,SADpB,aACwCsB,EAAKxB,KAD7C,MAEGwB,EAAKK,gBAAkBL,EAAKC,IAF/B,OAKDD,EAAKtB,SAAW,GAAKsB,EAAKK,gBAAkBL,EAAKC,KAAO,KACvD,sBAAKjB,UAAU,gBAAf,UACGgB,EAAK1B,KADR,IACe0B,EAAKtB,SADpB,aACwCsB,EAAKxB,KAD7C,WAEKwB,EAAKK,gBAAkBL,EAAKC,IAAO,KAAKV,QAAQ,OAGrDS,EAAKtB,WAAasB,EAAKpB,mBAAqB,yCA9CtCoB,EAAK3B,OAkDlBuB,EAAUG,OAAS,GAAK,uBACH,IAArBH,EAAUG,QACT,8BACE,qBAAIf,UAAU,oBAAd,+BACkBc,EAAWP,QAAQ,YClChCe,EA3BM,SAAAvB,GACrB,IAAOwB,EAA2DxB,EAA3DwB,iBAAkBC,EAAyCzB,EAAzCyB,eAAgBZ,EAAyBb,EAAzBa,UAAWa,EAAc1B,EAAd0B,WAElD,OACE,qCACGF,GAAoBC,EAAiB,GACpC,sBAAKxB,UAAU,gBAAf,gCACsBwB,EAAejB,QAAQ,GAD7C,OAIDgB,GAAoBC,GAAkB,GACrC,sBAAKxB,UAAU,gBAAf,oCACuBwB,EAAejB,QAAQ,OAG9CgB,GAAyC,IAArBX,EAAUG,QAC9B,8BACE,uBAAMW,SAAUD,EAAhB,UACE,uBAAOE,KAAK,OAAOC,YAAY,6BAC/B,wBAAQ5B,UAAU,2BAAlB,qCCgBG6B,EAnCE,SAAA9B,GACf,IACEa,EAMEb,EANFa,UACAE,EAKEf,EALFe,WACAgB,EAIE/B,EAJF+B,aACAC,EAGEhC,EAHFgC,kBACAC,EAEEjC,EAFFiC,oBACAC,EACElC,EADFkC,mBAeF,OACE,8BACwB,IAArBrB,EAAUG,QACT,8BACE,wBAAQf,UAAU,4BAA4BQ,QAhBrC,WACXM,EAAa,EACfoB,MAAM,iCAAD,OAAkC5B,SAAsB,IAAbQ,EAAkB,IAA7D,MAELoB,MAAM,qCAAD,OAAmCpB,EAAWP,QAAQ,KAE7DuB,EAAa,IACbC,EAAkB,GAClBC,GAAoB,GACpBC,GAAmB,IAOb,2BC8BKE,EApDF,SAAApC,GACX,IACEa,EAWEb,EAXFa,UACAkB,EAUE/B,EAVF+B,aACAzB,EASEN,EATFM,MACAQ,EAQEd,EARFc,SACAY,EAOE1B,EAPF0B,WACAF,EAMExB,EANFwB,iBACAS,EAKEjC,EALFiC,oBACAR,EAIEzB,EAJFyB,eACAO,EAGEhC,EAHFgC,kBACA3C,EAEEW,EAFFX,SACA6C,EACElC,EADFkC,mBAGEV,GACFQ,EAAkB,IAGpB,IAAMjB,EACJF,EAAUwB,QAAO,SAACC,EAAGC,GAAJ,OAAUD,EAAIC,EAAEpB,SAAWoB,EAAErB,MAAK,GAAKO,EAE1D,OACE,wBAAOxB,UAAU,qCAAjB,UACE,+CACA,gCACE,cAAC,EAAD,CACEY,UAAWA,EACXC,SAAUA,EACVR,MAAOA,EACPjB,SAAUA,EACV0B,WAAYA,IAEd,cAAC,EAAD,CACES,iBAAkBA,EAClBC,eAAgBA,EAChBZ,UAAWA,EACXa,WAAYA,IAEd,cAAC,EAAD,CACEb,UAAWA,EACXE,WAAYA,EACZgB,aAAcA,EACdC,kBAAmBA,EACnBC,oBAAqBA,EACrBC,mBAAoBA,WCuEfM,EAhHH,SAAAxC,GACV,IAAQX,EAAaD,EAAbC,SACR,EAA8CoD,mBAAS,IAAvD,mBAAOC,EAAP,KAAwBC,EAAxB,KACA,EAAkCF,mBAAS,IAA3C,mBAAO5B,EAAP,KAAkBkB,EAAlB,KACA,EAAgDU,oBAAS,GAAzD,mBAAOjB,EAAP,KAAyBS,EAAzB,KACA,EAA4CQ,mBAAS,GAArD,mBAAOhB,EAAP,KAAuBO,EAAvB,KACA,EAA8CS,oBAAS,GAAvD,mBAAOG,EAAP,KAAwBV,EAAxB,KAEAW,qBAAU,WACR,IAAMC,EAAczD,EAASsB,KAAI,SAAAM,GAAI,OACjB,IAAlBA,EAAKtB,SAAL,2BAESsB,GAFT,IAGME,SAAUF,EAAKzB,MAAQyB,EAAKzB,MAAQyB,EAAKtB,SACzC2B,gBAAkBL,EAAKzB,MAAQyB,EAAKtB,SAAY,IAChDoD,cAAe9B,EAAKzB,MAAQyB,EAAKnB,mBALvC,2BAQSmB,GART,IASME,SAAUF,EAAKzB,MACfuD,cAAe9B,EAAKzB,MAAQyB,EAAKnB,sBAGzC6C,EAAmBG,GACnBE,QAAQC,IAAIH,KACX,CAACzD,IAEJ,IA0BMiB,EAAQ,SAAAD,GACRuC,GAtBkB,WACtB,IAAMM,EAAOrC,EAAUsC,MAAK,SAAAlC,GAAI,OAAgB,IAAZA,EAAK3B,MACnC8D,EAAQvC,EAAUsC,MAAK,SAAAlC,GAAI,OAAgB,IAAZA,EAAK3B,WAE7B+D,IAATH,GACEA,EAAKhC,IAAM,IACb8B,QAAQC,IAAR,0BAA+BL,IAC/BI,QAAQC,IAAI,UACZD,QAAQC,IAAIG,GACRA,GAASR,IACXI,QAAQC,IAAR,sBAA2BG,EAAMlC,MACjC8B,QAAQC,IAAR,qBAA0BC,EAAKhC,MAC/B8B,QAAQC,IAAI,eACZG,EAAMhC,UAAY,GAClBgC,EAAM/B,QAAU,mCAChBa,GAAmB,KAOJoB,GACrB,IAAMC,EAAQ1C,EAAUsC,MAAK,SAAAlC,GAAI,OAAIA,EAAK3B,KAAOe,EAAQf,MAEvDyC,EADEwB,EAEA1C,EAAUF,KAAI,SAAAM,GAAI,OAChBA,EAAK3B,KAAOe,EAAQf,GAApB,2BAESiE,GAFT,IAGMrC,IAAKqC,EAAMrC,IAAM,EACjBE,SAAUmC,EAAMnC,SAAWmC,EAAMpC,WAEnCF,KAIK,GAAD,mBACPJ,GADO,aAAC,eAENR,GAFK,IAEIa,IAAK,EAAGE,SAAUf,EAAQc,eAkB9C,OACE,qCACE,cAAC,EAAD,IACA,sBAAKlB,UAAU,mBAAf,UACE,cAAC,EAAD,CAAMZ,SAAUqD,EAAiBpC,MAAOA,EAAOO,UAAWA,IAC1D,cAAC,EAAD,CACEA,UAAWA,EACXkB,aAAcA,EACdzB,MAAOA,EACPQ,SAtBS,SAAAT,GACf,IAAMkD,EAAQ1C,EAAUsC,MAAK,SAAAlC,GAAI,OAAIA,EAAK3B,KAAOe,EAAQf,MACvC,IAAdiE,EAAMrC,IACRa,EAAalB,EAAU2C,QAAO,SAAAvC,GAAI,OAAIA,EAAK3B,KAAOe,EAAQf,OAE1DyC,EACElB,EAAUF,KAAI,SAAAM,GAAI,OAChBA,EAAK3B,KAAOe,EAAQf,GAApB,2BAA8BiE,GAA9B,IAAqCrC,IAAKqC,EAAMrC,IAAM,IAAMD,OAgB5DS,WAxEW,SAAA+B,GACjBA,EAAEC,iBACFzB,GAAoB,IAuEdT,iBAAkBA,EAClBS,oBAAqBA,EACrBR,eAAgBA,EAChBO,kBAAmBA,EACnB3C,SAAUqD,EACVR,mBAAoBA,W,MC5G9ByB,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.c016283a.chunk.js","sourcesContent":["const data = {\r\n  products: [\r\n    {\r\n      id: 1,\r\n      name: 'Apples',\r\n      price: 1,\r\n      unit: 'bag',\r\n      imgUrl: 'images/apple.svg',\r\n      discount: 10,\r\n    },\r\n    {\r\n      id: 2,\r\n      name: 'Bread',\r\n      price: 0.8,\r\n      unit: 'loaf',\r\n      imgUrl: 'images/bread.svg',\r\n      discount: 0,\r\n    },\r\n    {\r\n      id: 3,\r\n      name: 'Milk',\r\n      price: 1.3,\r\n      unit: '500ml',\r\n      imgUrl: 'images/milk.svg',\r\n      discount: 0,\r\n    },\r\n    {\r\n      id: 4,\r\n      name: 'Soup',\r\n      price: 0.65,\r\n      unit: 'tin',\r\n      imgUrl: 'images/soup.svg',\r\n      discount: 0,\r\n      multibuyQuantity: 2,\r\n      multibuyProductId: 2,\r\n      multibuyDiscount: 0.5,\r\n    },\r\n  ],\r\n};\r\n\r\nexport default data;\r\n","const Header = props => {\r\n  return (\r\n    <header className='rounded padded col-bg-primary margin'>\r\n      <img src='images/shopping-cart.svg' alt='' className='logo' />\r\n      <h2 className='col-light main-header'>MY SHOPPING CART</h2>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","const Product = props => {\r\n  const { product, onAdd } = props;\r\n  return (\r\n    <div key={product.id} className='grid-container'>\r\n      <img src={product.imgUrl} alt={product.name} className='image-small' />\r\n      <h4 className='col-primary'>{product.name}</h4>\r\n      {product.price < 1 && (\r\n        <p>\r\n          {parseInt(product.price * 100, 10)}p per {product.unit}\r\n        </p>\r\n      )}\r\n      {product.price >= 1 && (\r\n        <p>\r\n          £{product.price.toFixed(2)} per {product.unit}\r\n        </p>\r\n      )}\r\n\r\n      {product.discount ? (\r\n        <p>\r\n          {product.name} {product.discount}% off\r\n        </p>\r\n      ) : (\r\n        <p>(No offers available)</p>\r\n      )}\r\n\r\n      <button\r\n        className='col-bg-primary col-light'\r\n        onClick={() => onAdd(product)}\r\n      >\r\n        Add to cart\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Product;\r\n","import Product from './Product';\r\n\r\nconst Main = props => {\r\n  const { products, onAdd } = props;\r\n  return (\r\n    <main className='rounded padded col-bg-light margin'>\r\n      <div>\r\n        <h2>Products</h2>\r\n          {products.map(product => (\r\n            <Product key={product.id} product={product} onAdd={onAdd} />\r\n          ))}\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default Main;\r\n","const CartItems = props => {\r\n  const { cartItems, onRemove, onAdd, products, totalPrice } = props;\r\n  return (\r\n    <div>\r\n      {cartItems.length === 0 && <div>Your shopping cart is empty</div>}\r\n      {cartItems.map(item => {\r\n        return (\r\n          <div key={item.id} className='cart-container'>\r\n            <hr />\r\n            <div>\r\n              {item.qty} x {item.name} @ £{item.newPrice.toFixed(2)} per{' '}\r\n              {item.unit}\r\n              <div>\r\n                <button\r\n                  onClick={() => onRemove(item)}\r\n                  className='col-bg-primary col-light margin-small'\r\n                >\r\n                  -\r\n                </button>\r\n                <button\r\n                  onClick={() => onAdd(item)}\r\n                  className='col-bg-primary col-light margin-small'\r\n                >\r\n                  +\r\n                </button>\r\n              </div>\r\n              <div className='cart-totals col-primary'>\r\n                Subtotal: £{item.subtotal.toFixed(2)}\r\n              </div>\r\n            </div>\r\n\r\n            {item.multibuyProductId && (\r\n              <div className='col-highlight'>\r\n                Buy {item.multibuyQuantity} {item.name} to get{' '}\r\n                {item.multibuyDiscount * 100}% off{' 1 x '}\r\n                {products[item.multibuyProductId - 1].name}\r\n              </div>\r\n            )}\r\n            {item.message && (\r\n              <div className='col-highlight'>{item.message}</div>\r\n            )}\r\n            {item.discount > 0 && item.discountedTotal * item.qty < 100 && (\r\n              <div className='col-highlight'>\r\n                {item.name} {item.discount}% off per {item.unit}: -\r\n                {item.discountedTotal * item.qty}p\r\n              </div>\r\n            )}\r\n            {item.discount > 0 && item.discountedTotal * item.qty >= 100 && (\r\n              <div className='col-highlight'>\r\n                {item.name} {item.discount}% off per {item.unit}: -£\r\n                {((item.discountedTotal * item.qty) / 100).toFixed(2)}\r\n              </div>\r\n            )}\r\n            {!item.discount && !item.multibuyProductId && <div>&nbsp;</div>}\r\n          </div>\r\n        );\r\n      })}\r\n      {cartItems.length > 0 && <hr />}\r\n      {cartItems.length !== 0 && (\r\n        <div>\r\n          <h3 className='total col-primary'>\r\n            Total amount: £{totalPrice.toFixed(2)}\r\n          </h3>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CartItems;\r\n","const DiscountCode = props => {\r\nconst {usedDiscountCode, discountAmount, cartItems, onDiscount} = props;\r\n\r\n  return (\r\n    <>\r\n      {usedDiscountCode && discountAmount < 1 && (\r\n        <div className='col-highlight'>\r\n          Discount applied: -{discountAmount.toFixed(2)}p\r\n        </div>\r\n      )}\r\n      {usedDiscountCode && discountAmount >= 1 && (\r\n        <div className='col-highlight'>\r\n          Discount applied: -£{discountAmount.toFixed(2)}\r\n        </div>\r\n      )}\r\n      {!usedDiscountCode && cartItems.length !== 0 && (\r\n        <div>\r\n          <form onSubmit={onDiscount}>\r\n            <input type='text' placeholder='Enter your discount code' />\r\n            <button className='col-bg-primary col-light'>Apply discount</button>\r\n          </form>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default DiscountCode;\r\n","const Checkout = props => {\r\n  const {\r\n    cartItems,\r\n    totalPrice,\r\n    setCartItems,\r\n    setDiscountAmount,\r\n    setUsedDiscountCode,\r\n    setMultibuyAllowed,\r\n  } = props;\r\n\r\n  const checkout = () => {\r\n    if (totalPrice < 1) {\r\n      alert(`Thank you for your payment of ${parseInt(totalPrice * 100, 10)}p`);\r\n    } else {\r\n      alert(`Thank you for your payment of £${totalPrice.toFixed(2)}`);\r\n    }\r\n    setCartItems([]);\r\n    setDiscountAmount(0);\r\n    setUsedDiscountCode(false);\r\n    setMultibuyAllowed(true);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {cartItems.length !== 0 && (\r\n        <div>\r\n          <button className='col-bg-secondary col-dark' onClick={checkout}>\r\n            Checkout\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Checkout;\r\n","import CartItems from './CartItems';\r\nimport DiscountCode from './DiscountCode';\r\nimport Checkout from './Checkout';\r\n\r\nconst Cart = props => {\r\n  const {\r\n    cartItems,\r\n    setCartItems,\r\n    onAdd,\r\n    onRemove,\r\n    onDiscount,\r\n    usedDiscountCode,\r\n    setUsedDiscountCode,\r\n    discountAmount,\r\n    setDiscountAmount,\r\n    products,\r\n    setMultibuyAllowed,\r\n  } = props;\r\n\r\n  if (usedDiscountCode) {\r\n    setDiscountAmount(0.5);\r\n  }\r\n\r\n  const totalPrice =\r\n    cartItems.reduce((a, c) => a + c.newPrice * c.qty, 0) - discountAmount;\r\n\r\n  return (\r\n    <aside className='rounded padded col-bg-light margin'>\r\n      <h2>Shopping Cart</h2>\r\n      <div>\r\n        <CartItems\r\n          cartItems={cartItems}\r\n          onRemove={onRemove}\r\n          onAdd={onAdd}\r\n          products={products}\r\n          totalPrice={totalPrice}\r\n        />\r\n        <DiscountCode\r\n          usedDiscountCode={usedDiscountCode}\r\n          discountAmount={discountAmount}\r\n          cartItems={cartItems}\r\n          onDiscount={onDiscount}\r\n        />\r\n        <Checkout\r\n          cartItems={cartItems}\r\n          totalPrice={totalPrice}\r\n          setCartItems={setCartItems}\r\n          setDiscountAmount={setDiscountAmount}\r\n          setUsedDiscountCode={setUsedDiscountCode}\r\n          setMultibuyAllowed={setMultibuyAllowed}\r\n        />\r\n      </div>\r\n    </aside>\r\n  );\r\n};\r\n\r\nexport default Cart;\r\n","import { useState, useEffect } from 'react';\n\nimport data from './data/data';\n\nimport Header from './components/Header';\nimport Main from './components/Main';\nimport Cart from './components/Cart/Cart';\n\nconst App = props => {\n  const { products } = data;\n  const [updatedProducts, setUpdatedProducts] = useState([]);\n  const [cartItems, setCartItems] = useState([]);\n  const [usedDiscountCode, setUsedDiscountCode] = useState(false);\n  const [discountAmount, setDiscountAmount] = useState(0);\n  const [multibuyAllowed, setMultibuyAllowed] = useState(true);\n\n  useEffect(() => {\n    const newProducts = products.map(item =>\n      item.discount !== 0\n        ? {\n            ...item,\n            newPrice: item.price - item.price / item.discount,\n            discountedTotal: (item.price / item.discount) * 100,\n            multibuyPrice: item.price * item.multibuyDiscount,\n          }\n        : {\n            ...item,\n            newPrice: item.price,\n            multibuyPrice: item.price * item.multibuyDiscount,\n          }\n    );\n    setUpdatedProducts(newProducts);\n    console.log(newProducts);\n  }, [products]);\n\n  const onDiscount = e => {\n    e.preventDefault();\n    setUsedDiscountCode(true);\n  };\n\n  const onCheckMultibuy = () => {\n    const soup = cartItems.find(item => item.id === 4);\n    const bread = cartItems.find(item => item.id === 2);\n\n    if (soup !== undefined) {\n      if (soup.qty % 2) {\n        console.log(`multibuyAllowed ${multibuyAllowed}`);\n        console.log('2 soup');\n        console.log(bread);\n        if (bread && multibuyAllowed) {\n          console.log(`bread.qty = ${bread.qty}`);\n          console.log(`soup.qty = ${soup.qty}`);\n          console.log('multibuying');\n          bread.subtotal -= 0.4;\n          bread.message = 'Multibuy discount applied (-50%)';\n          setMultibuyAllowed(false);\n        }\n      }\n    }\n  };\n\n  const onAdd = product => {\n    if (multibuyAllowed) onCheckMultibuy();\n    const exist = cartItems.find(item => item.id === product.id);\n    if (exist) {\n      setCartItems(\n        cartItems.map(item =>\n          item.id === product.id\n            ? {\n                ...exist,\n                qty: exist.qty + 1,\n                subtotal: exist.subtotal + exist.newPrice,\n              }\n            : item\n        )\n      );\n    } else {\n      setCartItems([\n        ...cartItems,\n        { ...product, qty: 1, subtotal: product.newPrice },\n      ]);\n    }\n  };\n\n  const onRemove = product => {\n    const exist = cartItems.find(item => item.id === product.id);\n    if (exist.qty === 1) {\n      setCartItems(cartItems.filter(item => item.id !== product.id));\n    } else {\n      setCartItems(\n        cartItems.map(item =>\n          item.id === product.id ? { ...exist, qty: exist.qty - 1 } : item\n        )\n      );\n    }\n  };\n\n  return (\n    <>\n      <Header />\n      <div className='container-master'>\n        <Main products={updatedProducts} onAdd={onAdd} cartItems={cartItems} />\n        <Cart\n          cartItems={cartItems}\n          setCartItems={setCartItems}\n          onAdd={onAdd}\n          onRemove={onRemove}\n          onDiscount={onDiscount}\n          usedDiscountCode={usedDiscountCode}\n          setUsedDiscountCode={setUsedDiscountCode}\n          discountAmount={discountAmount}\n          setDiscountAmount={setDiscountAmount}\n          products={updatedProducts}\n          setMultibuyAllowed={setMultibuyAllowed}\n        />\n      </div>\n    </>\n  );\n};\n\nexport default App;\n\n// For this week only Apples are at 10% off per bag purchased,\n// For every two tins of soup that are purchased a bread can also be purchased at 50% off\n// You also optionally provide a valid Discount token to redeem 50p off the total bill\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}