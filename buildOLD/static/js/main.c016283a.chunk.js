(this.webpackJsonpwheelright=this.webpackJsonpwheelright||[]).push([[0],{14:function(t,e,c){},15:function(t,e,c){"use strict";c.r(e);var i=c(1),n=c.n(i),s=c(7),o=c.n(s),r=c(8),d=c(2),u=c(3),a={products:[{id:1,name:"Apples",price:1,unit:"bag",imgUrl:"images/apple.svg",discount:10},{id:2,name:"Bread",price:.8,unit:"loaf",imgUrl:"images/bread.svg",discount:0},{id:3,name:"Milk",price:1.3,unit:"500ml",imgUrl:"images/milk.svg",discount:0},{id:4,name:"Soup",price:.65,unit:"tin",imgUrl:"images/soup.svg",discount:0,multibuyQuantity:2,multibuyProductId:2,multibuyDiscount:.5}]},l=c(0),j=function(t){return Object(l.jsxs)("header",{className:"rounded padded col-bg-primary margin",children:[Object(l.jsx)("img",{src:"images/shopping-cart.svg",alt:"",className:"logo"}),Object(l.jsx)("h2",{className:"col-light main-header",children:"MY SHOPPING CART"})]})},m=function(t){var e=t.product,c=t.onAdd;return Object(l.jsxs)("div",{className:"grid-container",children:[Object(l.jsx)("img",{src:e.imgUrl,alt:e.name,className:"image-small"}),Object(l.jsx)("h4",{className:"col-primary",children:e.name}),e.price<1&&Object(l.jsxs)("p",{children:[parseInt(100*e.price,10),"p per ",e.unit]}),e.price>=1&&Object(l.jsxs)("p",{children:["\xa3",e.price.toFixed(2)," per ",e.unit]}),e.discount?Object(l.jsxs)("p",{children:[e.name," ",e.discount,"% off"]}):Object(l.jsx)("p",{children:"(No offers available)"}),Object(l.jsx)("button",{className:"col-bg-primary col-light",onClick:function(){return c(e)},children:"Add to cart"})]},e.id)},b=function(t){var e=t.products,c=t.onAdd;return Object(l.jsx)("main",{className:"rounded padded col-bg-light margin",children:Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Products"}),e.map((function(t){return Object(l.jsx)(m,{product:t,onAdd:c},t.id)}))]})})},h=function(t){var e=t.cartItems,c=t.onRemove,i=t.onAdd,n=t.products,s=t.totalPrice;return Object(l.jsxs)("div",{children:[0===e.length&&Object(l.jsx)("div",{children:"Your shopping cart is empty"}),e.map((function(t){return Object(l.jsxs)("div",{className:"cart-container",children:[Object(l.jsx)("hr",{}),Object(l.jsxs)("div",{children:[t.qty," x ",t.name," @ \xa3",t.newPrice.toFixed(2)," per"," ",t.unit,Object(l.jsxs)("div",{children:[Object(l.jsx)("button",{onClick:function(){return c(t)},className:"col-bg-primary col-light margin-small",children:"-"}),Object(l.jsx)("button",{onClick:function(){return i(t)},className:"col-bg-primary col-light margin-small",children:"+"})]}),Object(l.jsxs)("div",{className:"cart-totals col-primary",children:["Subtotal: \xa3",t.subtotal.toFixed(2)]})]}),t.multibuyProductId&&Object(l.jsxs)("div",{className:"col-highlight",children:["Buy ",t.multibuyQuantity," ",t.name," to get"," ",100*t.multibuyDiscount,"% off"," 1 x ",n[t.multibuyProductId-1].name]}),t.message&&Object(l.jsx)("div",{className:"col-highlight",children:t.message}),t.discount>0&&t.discountedTotal*t.qty<100&&Object(l.jsxs)("div",{className:"col-highlight",children:[t.name," ",t.discount,"% off per ",t.unit,": -",t.discountedTotal*t.qty,"p"]}),t.discount>0&&t.discountedTotal*t.qty>=100&&Object(l.jsxs)("div",{className:"col-highlight",children:[t.name," ",t.discount,"% off per ",t.unit,": -\xa3",(t.discountedTotal*t.qty/100).toFixed(2)]}),!t.discount&&!t.multibuyProductId&&Object(l.jsx)("div",{children:"\xa0"})]},t.id)})),e.length>0&&Object(l.jsx)("hr",{}),0!==e.length&&Object(l.jsx)("div",{children:Object(l.jsxs)("h3",{className:"total col-primary",children:["Total amount: \xa3",s.toFixed(2)]})})]})},p=function(t){var e=t.usedDiscountCode,c=t.discountAmount,i=t.cartItems,n=t.onDiscount;return Object(l.jsxs)(l.Fragment,{children:[e&&c<1&&Object(l.jsxs)("div",{className:"col-highlight",children:["Discount applied: -",c.toFixed(2),"p"]}),e&&c>=1&&Object(l.jsxs)("div",{className:"col-highlight",children:["Discount applied: -\xa3",c.toFixed(2)]}),!e&&0!==i.length&&Object(l.jsx)("div",{children:Object(l.jsxs)("form",{onSubmit:n,children:[Object(l.jsx)("input",{type:"text",placeholder:"Enter your discount code"}),Object(l.jsx)("button",{className:"col-bg-primary col-light",children:"Apply discount"})]})})]})},g=function(t){var e=t.cartItems,c=t.totalPrice,i=t.setCartItems,n=t.setDiscountAmount,s=t.setUsedDiscountCode,o=t.setMultibuyAllowed;return Object(l.jsx)("div",{children:0!==e.length&&Object(l.jsx)("div",{children:Object(l.jsx)("button",{className:"col-bg-secondary col-dark",onClick:function(){c<1?alert("Thank you for your payment of ".concat(parseInt(100*c,10),"p")):alert("Thank you for your payment of \xa3".concat(c.toFixed(2))),i([]),n(0),s(!1),o(!0)},children:"Checkout"})})})},O=function(t){var e=t.cartItems,c=t.setCartItems,i=t.onAdd,n=t.onRemove,s=t.onDiscount,o=t.usedDiscountCode,r=t.setUsedDiscountCode,d=t.discountAmount,u=t.setDiscountAmount,a=t.products,j=t.setMultibuyAllowed;o&&u(.5);var m=e.reduce((function(t,e){return t+e.newPrice*e.qty}),0)-d;return Object(l.jsxs)("aside",{className:"rounded padded col-bg-light margin",children:[Object(l.jsx)("h2",{children:"Shopping Cart"}),Object(l.jsxs)("div",{children:[Object(l.jsx)(h,{cartItems:e,onRemove:n,onAdd:i,products:a,totalPrice:m}),Object(l.jsx)(p,{usedDiscountCode:o,discountAmount:d,cartItems:e,onDiscount:s}),Object(l.jsx)(g,{cartItems:e,totalPrice:m,setCartItems:c,setDiscountAmount:u,setUsedDiscountCode:r,setMultibuyAllowed:j})]})]})},x=function(t){var e=a.products,c=Object(i.useState)([]),n=Object(u.a)(c,2),s=n[0],o=n[1],m=Object(i.useState)([]),h=Object(u.a)(m,2),p=h[0],g=h[1],x=Object(i.useState)(!1),y=Object(u.a)(x,2),f=y[0],v=y[1],A=Object(i.useState)(0),N=Object(u.a)(A,2),D=N[0],I=N[1],C=Object(i.useState)(!0),P=Object(u.a)(C,2),q=P[0],w=P[1];Object(i.useEffect)((function(){var t=e.map((function(t){return 0!==t.discount?Object(d.a)(Object(d.a)({},t),{},{newPrice:t.price-t.price/t.discount,discountedTotal:t.price/t.discount*100,multibuyPrice:t.price*t.multibuyDiscount}):Object(d.a)(Object(d.a)({},t),{},{newPrice:t.price,multibuyPrice:t.price*t.multibuyDiscount})}));o(t),console.log(t)}),[e]);var k=function(t){q&&function(){var t=p.find((function(t){return 4===t.id})),e=p.find((function(t){return 2===t.id}));void 0!==t&&t.qty%2&&(console.log("multibuyAllowed ".concat(q)),console.log("2 soup"),console.log(e),e&&q&&(console.log("bread.qty = ".concat(e.qty)),console.log("soup.qty = ".concat(t.qty)),console.log("multibuying"),e.subtotal-=.4,e.message="Multibuy discount applied (-50%)",w(!1)))}();var e=p.find((function(e){return e.id===t.id}));g(e?p.map((function(c){return c.id===t.id?Object(d.a)(Object(d.a)({},e),{},{qty:e.qty+1,subtotal:e.subtotal+e.newPrice}):c})):[].concat(Object(r.a)(p),[Object(d.a)(Object(d.a)({},t),{},{qty:1,subtotal:t.newPrice})]))};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(j,{}),Object(l.jsxs)("div",{className:"container-master",children:[Object(l.jsx)(b,{products:s,onAdd:k,cartItems:p}),Object(l.jsx)(O,{cartItems:p,setCartItems:g,onAdd:k,onRemove:function(t){var e=p.find((function(e){return e.id===t.id}));1===e.qty?g(p.filter((function(e){return e.id!==t.id}))):g(p.map((function(c){return c.id===t.id?Object(d.a)(Object(d.a)({},e),{},{qty:e.qty-1}):c})))},onDiscount:function(t){t.preventDefault(),v(!0)},usedDiscountCode:f,setUsedDiscountCode:v,discountAmount:D,setDiscountAmount:I,products:s,setMultibuyAllowed:w})]})]})};c(14);o.a.render(Object(l.jsx)(n.a.StrictMode,{children:Object(l.jsx)(x,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.c016283a.chunk.js.map